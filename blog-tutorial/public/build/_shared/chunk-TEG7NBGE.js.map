{
  "version": 3,
  "sources": ["../../../app/utils.js"],
  "sourcesContent": ["import { useMatches } from \"@remix-run/react\";\nimport { useMemo } from \"react\";\n\nconst DEFAULT_REDIRECT = \"/\";\n\n/**\n * This should be used any time the redirect path is user-provided\n * (Like the query string on our login/signup pages). This avoids\n * open-redirect vulnerabilities.\n * @param {string} to The redirect destination\n * @param {string} defaultRedirect The redirect to use if the to is unsafe.\n */\nexport function safeRedirect(to, defaultRedirect = DEFAULT_REDIRECT) {\n  if (!to || typeof to !== \"string\") {\n    return defaultRedirect;\n  }\n\n  if (!to.startsWith(\"/\") || to.startsWith(\"//\")) {\n    return defaultRedirect;\n  }\n\n  return to;\n}\n\n/**\n * This base hook is used in other hooks to quickly search for specific data\n * across all loader data using useMatches.\n * @param {string} id The route id\n * @returns {JSON|undefined} The router data or undefined if not found\n */\nexport function useMatchesData(id) {\n  const matchingRoutes = useMatches();\n  const route = useMemo(\n    () => matchingRoutes.find((route) => route.id === id),\n    [matchingRoutes, id]\n  );\n\n  return route?.data;\n}\n\nfunction isUser(user) {\n  return user && typeof user === \"object\" && typeof user.email === \"string\";\n}\n\nexport function useOptionalUser() {\n  const data = useMatchesData(\"root\");\n  if (!data || !isUser(data.user)) {\n    return undefined;\n  }\n  return data.user;\n}\n\nexport function useUser() {\n  const maybeUser = useOptionalUser();\n  if (!maybeUser) {\n    throw new Error(\n      \"No user found in root loader, but user is required by useUser. If user is optional, try useOptionalUser instead.\"\n    );\n  }\n  return maybeUser;\n}\n\nexport function validateEmail(email) {\n  return typeof email === \"string\" && email.length > 3 && email.includes(\"@\");\n}\n"],
  "mappings": ";;;;;;;;;AACA,IAAAA,gBAAwB;AA6BjB,SAAS,eAAe,IAAI;AACjC,QAAM,iBAAiB,WAAW;AAClC,QAAM,YAAQ;AAAA,IACZ,MAAM,eAAe,KAAK,CAACC,WAAUA,OAAM,OAAO,EAAE;AAAA,IACpD,CAAC,gBAAgB,EAAE;AAAA,EACrB;AAEA,SAAO,+BAAO;AAChB;AAEA,SAAS,OAAO,MAAM;AACpB,SAAO,QAAQ,OAAO,SAAS,YAAY,OAAO,KAAK,UAAU;AACnE;AAEO,SAAS,kBAAkB;AAChC,QAAM,OAAO,eAAe,MAAM;AAClC,MAAI,CAAC,QAAQ,CAAC,OAAO,KAAK,IAAI,GAAG;AAC/B,WAAO;AAAA,EACT;AACA,SAAO,KAAK;AACd;AAEO,SAAS,UAAU;AACxB,QAAM,YAAY,gBAAgB;AAClC,MAAI,CAAC,WAAW;AACd,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;",
  "names": ["import_react", "route"]
}
